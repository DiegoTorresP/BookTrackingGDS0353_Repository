extends layout

block content
  .container-fluid
    .row
      .col
        .container-fluid
          .row.barraresultado
            .col Atender Solicitudes
          .row.rowtabla
            .row
              .col
                table#tablaSolicitud.table.table-bordered.tabla
                  thead
                    tr
                      th(style='display: none;') Id
                      th(scope='col') Solicitante
                      th(scope='col') Libro
                      th(scope='col') Fecha de Solicitud
                      th(scope='col') Fecha de Entrega
                      th(scope='col') EstatusPrestamo
                      th(scope='col') Ver detalles de Libro
                      th(scope='col') Ver detalles de Alumno
                  tbody
                    -var meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];
                    -var dias_semana = ['Domingo', 'Lunes', 'martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
                    each solicitud in Solicitud 
                      tr 
                        td(style='display:none;' id='id') #{solicitud._id}
                        th #{solicitud.nombre.Nombre_s +" "+ solicitud.nombre.Apellido_Paterno+" "+ solicitud.nombre.Apellido_Materno} 
                        td #{solicitud.libro.Nombre}
                        td #{dias_semana[solicitud.FechaSolicitud.getDay()] + ', ' + solicitud.FechaSolicitud.getDate() + ' de ' + meses[solicitud.FechaSolicitud.getMonth()] + ' de ' + solicitud.FechaSolicitud.getUTCFullYear()}
                        td #{dias_semana[solicitud.FechaEntrega.getDay()] + ', ' + solicitud.FechaEntrega.getDate() + ' de ' + meses[solicitud.FechaEntrega.getMonth()] + ' de ' + solicitud.FechaEntrega.getUTCFullYear()}
                        if solicitud.EstatusPrestamo == "Denegado"
                          td(style='background-color: red; color:white') #{solicitud.EstatusPrestamo}
                        else
                          if solicitud.EstatusPrestamo == "Aceptado"
                            td(style='background-color: green; color:white') #{solicitud.EstatusPrestamo}
                          else 
                            td(style='background-color: blue; color:white') #{solicitud.EstatusPrestamo}
                        td 
                          -var url = "/administrar/detalle_libro/"+ (JSON.parse(JSON.stringify(solicitud.libro._id)))+"/solicitud/"+solicitud._id+"/status/"+solicitud.EstatusPrestamo
                          a(href=url) 
                            img(src='/images/icon-mas.png', width='30px')  
                        td 
                          -var url = "/administrar/detalle_alumno/"+ solicitud.Solicitante
                          a(href=url)
                            img(src='/images/icon-mas.png', width='30px')
    script(src="/js/sweet_carga.js")
    script(src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous")
                   